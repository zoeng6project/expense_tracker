(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{9704:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(7415)}])},7415:function(e,n,t){"use strict";t.r(n),t.d(n,{RECEIPTS_ENUM:function(){return ye},default:function(){return Ce}});var r=t(4051),a=t.n(r),o=t(5893),i=t(7294),c=t(9008),s=t(1163),u=t(8456),l=t(7948),d=t(6798),f=t(1737),p=t(6447),h=t(5861),x=t(4674),v=t(1519),m=t(2492),j=t(9581),b=t(1425),g=t(3321),y=t(6540),w=t(7357),Z=t(2293),C=t(155),_=t(2231),k=t(4639),N=t.n(k);function E(){var e=(0,_.aC)(),n=e.authUser,t=e.signOut;return(0,o.jsx)(w.Z,{sx:{flexGrow:1},children:(0,o.jsx)(Z.Z,{position:"static",className:N().appbar,children:(0,o.jsx)(C.Z,{className:N().toolbar,children:(0,o.jsxs)(l.Z,{className:N().container,children:[(0,o.jsx)(h.Z,{variant:"h3",sx:{flexGrow:1,alignSelf:"center"},children:"EXPENSE TRACKER"}),(0,o.jsxs)(p.Z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[(0,o.jsx)(h.Z,{variant:"h6",sx:{flexGrow:1},children:null===n||void 0===n?void 0:n.email}),(0,o.jsx)(g.Z,{variant:"text",color:"secondary",onClick:t,children:"Logout"})]})]})})})})}var S=t(9661),D=t(1733),O=t(7957),P=t(2912),R=t(1933),T=t.n(R);function I(e){var n=e.receipt;return(0,o.jsx)("div",{children:(0,o.jsxs)(p.Z,{direction:"row",justifyContent:"space-between",sx:{margin:"1em 0"},children:[(0,o.jsxs)(p.Z,{direction:"row",spacing:2,sx:{alignItems:"center"},children:[(0,o.jsx)(S.Z,{alt:"receipt image",src:n.imageUrl}),(0,o.jsxs)(p.Z,{direction:"row",className:T().contentRow,children:[(0,o.jsxs)(p.Z,{direction:"column",sx:{flexGrow:1},children:[(0,o.jsx)(h.Z,{variant:"h3",children:(0,P.Z)(n.date,"MM/dd/yy")}),(0,o.jsxs)(h.Z,{variant:"h4",children:["$",n.amount]})]}),(0,o.jsxs)(p.Z,{direction:"column",sx:{flexGrow:1},children:[(0,o.jsxs)(h.Z,{variant:"h5",children:[n.locationName," (",n.address,")"]}),(0,o.jsx)(h.Z,{variant:"h5",children:n.items})]})]})]}),(0,o.jsxs)(p.Z,{direction:"row",className:T().actions,children:[(0,o.jsx)(x.Z,{"aria-label":"edit",color:"secondary",onClick:e.onEdit,children:(0,o.jsx)(O.Z,{})}),(0,o.jsx)(x.Z,{"aria-label":"delete",color:"secondary",onClick:e.onDelete,children:(0,o.jsx)(D.Z,{})})]})]})})}var G=t(3741),U=t(9669),B=t(5645),H=t(720),X=t(109),M=t(3332),J=t(6650);function L(e,n,t,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,a)}function z(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){L(o,r,a,i,c,"next",e)}function c(e){L(o,r,a,i,c,"throw",e)}i(void 0)}))}}var A="gs://expense-tracker-6819d.appspot.com";function K(e,n){return V.apply(this,arguments)}function V(){return(V=z(a().mark((function e(n,t){var r,o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,P.Z)(new Date,"yyyy-MM-dd'T'HH:mm:ss'Z'"),o="".concat(A,"/").concat(t,"/").concat(r,".jpg"),i=(0,J.iH)(M.t,o),e.next=5,(0,J.KV)(i,n);case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return F.apply(this,arguments)}function F(){return(F=z(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.Jt)((0,J.iH)(M.t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e,n){return Y.apply(this,arguments)}function Y(){return(Y=z(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,J.KV)((0,J.iH)(M.t,t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e,n,t,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,a)}function Q(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){$(o,r,a,i,c,"next",e)}function c(e){$(o,r,a,i,c,"throw",e)}i(void 0)}))}}function ee(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ee(e,n,t[n])}))}return e}var te="receipts";function re(e,n,t,r,a,o,i){(0,X.ET)((0,X.hJ)(M.db,te),{uid:e,date:n,locationName:t,address:r,items:a,amount:o,imageBucket:i})}function ae(e,n,t){return oe.apply(this,arguments)}function oe(){return oe=Q(a().mark((function e(n,t,r){var o,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=(0,X.IO)((0,X.hJ)(M.db,te),(0,X.ar)("uid","==",n),(0,X.Xo)("date","desc")),i=(0,X.cf)(o,function(){var e=Q(a().mark((function e(n){var o,i,c,s,u,l,d,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=[],i=!0,c=!1,s=void 0,e.prev=2,u=n.docs[Symbol.iterator]();case 4:if(i=(l=u.next()).done){e.next=23;break}return d=l.value,f=d.data(),e.t0=o,e.t1=ne,e.t2={},e.t3=f,e.t4=f.date.toDate(),e.t5=d.id,e.next=15,q(f.imageBucket);case 15:return e.t6=e.sent,e.t7={date:e.t4,id:e.t5,imageUrl:e.t6},e.t8=(0,e.t1)(e.t2,e.t3,e.t7),e.next=20,e.t0.push.call(e.t0,e.t8);case 20:i=!0,e.next=4;break;case 23:e.next=29;break;case 25:e.prev=25,e.t9=e.catch(2),c=!0,s=e.t9;case 29:e.prev=29,e.prev=30,i||null==u.return||u.return();case 32:if(e.prev=32,!c){e.next=35;break}throw s;case 35:return e.finish(32);case 36:return e.finish(29);case 37:t(o),r(!1);case 39:case"end":return e.stop()}}),e,null,[[2,25,29,37],[30,,32,36]])})));return function(n){return e.apply(this,arguments)}}()),e.abrupt("return",i);case 3:case"end":return e.stop()}}),e)}))),oe.apply(this,arguments)}var ie=t(6409),ce=t.n(ie);function se(e,n,t,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,a)}function ue(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function le(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){ue(e,n,t[n])}))}return e}var de="No file selected",fe={fileName:de,file:null,date:null,locationName:"",address:"",items:"",amount:""};function pe(e){var n=(0,_.aC)().authUser,t=Object.keys(e.edit).length>0,r=(0,i.useState)(t?e.edit:fe),c=r[0],s=r[1],u=(0,i.useState)(!1),l=u[0],d=u[1];(0,i.useEffect)((function(){e.showDialog&&s(t?e.edit:fe)}),[e.edit,e.showDialog]);var f=function(e,n){s((function(t){return le({},t,ue({},n,e.target.value))}))},x=function(){d(!1),e.onCloseDialog()},v=function(){var r,o=(r=a().mark((function r(){var o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(d(!0),r.prev=1,!t){r.next=10;break}if(!c.fileName){r.next=6;break}return r.next=6,W(c.file,c.imageBucket);case 6:return r.next=8,a=c.id,i=n.uid,s=c.date,u=c.locationName,l=c.address,f=c.items,p=c.amount,h=c.imageBucket,void(0,X.pl)((0,X.JU)(M.db,te,a),{uid:i,date:s,locationName:u,address:l,items:f,amount:p,imageBucket:h});case 8:r.next=15;break;case 10:return r.next=12,K(c.file,n.uid);case 12:return o=r.sent,r.next=15,re(n.uid,c.date,c.locationName,c.address,c.items,c.amount,o);case 15:e.onSuccess(t?ye.edit:ye.add),r.next=21;break;case 18:r.prev=18,r.t0=r.catch(1),e.onError(t?ye.edit:ye.add);case 21:x();case 22:case"end":return r.stop()}var a,i,s,u,l,f,p,h}),r,null,[[1,18]])})),function(){var e=this,n=arguments;return new Promise((function(t,a){var o=r.apply(e,n);function i(e){se(o,t,a,i,c,"next",e)}function c(e){se(o,t,a,i,c,"throw",e)}i(void 0)}))});return function(){return o.apply(this,arguments)}}();return(0,o.jsxs)(m.Z,{classes:{paper:ce().dialog},onClose:function(){return x()},open:e.showDialog,component:"form",children:[(0,o.jsxs)(h.Z,{variant:"h4",className:ce().title,children:[t?"EDIT":"ADD"," EXPENSE"]}),(0,o.jsxs)(j.Z,{className:ce().fields,children:[(0,o.jsxs)(p.Z,{direction:"row",spacing:2,className:ce().receiptImage,children:[t&&!c.fileName&&(0,o.jsx)(S.Z,{alt:"receipt image",src:c.imageUrl,sx:{marginRight:"1em"}}),(0,o.jsxs)(g.Z,{variant:"outlined",component:"label",color:"secondary",children:["Upload Receipt",(0,o.jsx)("input",{type:"file",hidden:!0,onInput:function(e){!function(e){var n=e.files[0];s((function(e){return le({},e,{fileName:n.name})})),s((function(e){return le({},e,{file:n})}))}(e.target)}})]}),(0,o.jsx)(h.Z,{children:c.fileName})]}),(0,o.jsx)(p.Z,{children:(0,o.jsx)(H._,{dateAdapter:U.Z,children:(0,o.jsx)(B.M,{label:"Date",value:c.date,onChange:function(e){s((function(n){return le({},n,{date:e})}))},maxDate:new Date,renderInput:function(e){return(0,o.jsx)(G.Z,le({color:"tertiary"},e))}})})}),(0,o.jsx)(G.Z,{color:"tertiary",label:"Location name",variant:"standard",value:c.locationName,onChange:function(e){return f(e,"locationName")}}),(0,o.jsx)(G.Z,{color:"tertiary",label:"Location address",variant:"standard",value:c.address,onChange:function(e){return f(e,"address")}}),(0,o.jsx)(G.Z,{color:"tertiary",label:"Items",variant:"standard",value:c.items,onChange:function(e){return f(e,"items")}}),(0,o.jsx)(G.Z,{color:"tertiary",label:"Amount",variant:"standard",value:c.amount,onChange:function(e){return f(e,"amount")}})]}),(0,o.jsx)(b.Z,{children:l?(0,o.jsx)(g.Z,{color:"secondary",variant:"contained",disabled:!0,children:"Submitting..."}):(0,o.jsx)(g.Z,{color:"secondary",variant:"contained",disabled:c.fileName===de||!c.date||0===c.locationName.length||0===c.address.length||0===c.items.length||0===c.amount.length,onClick:v,children:"Submit"})})]})}var he=t(358),xe=t.n(he);function ve(e,n,t,r,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void t(u)}c.done?n(s):Promise.resolve(s).then(r,a)}function me(e){return function(){var n=this,t=arguments;return new Promise((function(r,a){var o=e.apply(n,t);function i(e){ve(o,r,a,i,c,"next",e)}function c(e){ve(o,r,a,i,c,"throw",e)}i(void 0)}))}}function je(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var be,ge,ye=Object.freeze({none:0,add:1,edit:2,delete:3}),we=(je(be={},ye.add,"Receipt was successfully added!"),je(be,ye.edit,"Receipt was successfully updated!"),je(be,ye.delete,"Receipt successfully deleted!"),be),Ze=(je(ge={},ye.add,"Receipt was not successfully added!"),je(ge,ye.edit,"Receipt was not successfully updated!"),je(ge,ye.delete,"Receipt not successfully deleted!"),ge);function Ce(){var e=(0,_.aC)(),n=e.authUser,t=e.isLoading,r=(0,s.useRouter)(),w=(0,i.useState)(ye.none),Z=w[0],C=w[1],k=(0,i.useState)(!0),N=(k[0],k[1]),S=(0,i.useState)(""),D=S[0],O=S[1],P=(0,i.useState)(""),R=P[0],T=P[1],G=(0,i.useState)([]),U=G[0],B=G[1],H=(0,i.useState)({}),L=H[0],z=H[1],A=(0,i.useState)(""),K=A[0],V=A[1],q=(0,i.useState)(!1),F=q[0],W=q[1],Y=(0,i.useState)(!1),$=Y[0],Q=Y[1],ee=function(){var e=me(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:V(t?we[n]:Ze[n]),t?W(!0):Q(!0),C(ye.none);case 3:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){t||n||r.push("/")}),[n,t]),(0,i.useEffect)(me(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=5;break}return e.next=3,ae(n.uid,B,N);case 3:return t=e.sent,e.abrupt("return",(function(){return t()}));case 5:case"end":return e.stop()}}),e)}))),[n]);var ne=function(){C(ye.none),O("")},re=function(){var e=me(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.prev=1,e.next=4,r=D,void(0,X.oe)((0,X.JU)(M.db,te,r));case 4:return e.next=6,t=R,void(0,J.oq)((0,J.iH)(M.t,t));case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),n=!1;case 11:ne(),ee(ye.delete,n);case 13:case"end":return e.stop()}var t,r}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();return n?(0,o.jsxs)("div",{children:[(0,o.jsx)(c.default,{children:(0,o.jsx)("title",{children:"Expense Tracker"})}),(0,o.jsx)(E,{}),(0,o.jsxs)(l.Z,{children:[(0,o.jsx)(d.Z,{open:F,autoHideDuration:1500,onClose:function(){return W(!1)},anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(f.Z,{onClose:function(){return W(!1)},severity:"success",children:K})}),(0,o.jsx)(d.Z,{open:$,autoHideDuration:1500,onClose:function(){return Q(!1)},anchorOrigin:{horizontal:"center",vertical:"top"},children:(0,o.jsx)(f.Z,{onClose:function(){return Q(!1)},severity:"error",children:K})}),(0,o.jsxs)(p.Z,{direction:"row",sx:{paddingTop:"1.5em"},children:[(0,o.jsx)(h.Z,{variant:"h4",sx:{lineHeight:2,paddingRight:"0.5em"},children:"EXPENSES"}),(0,o.jsx)(x.Z,{"aria-label":"edit",color:"secondary",onClick:function(){C(ye.add),z({})},className:xe().addButton,children:(0,o.jsx)(y.Z,{})})]}),U.map((function(e){return(0,o.jsxs)("div",{children:[(0,o.jsx)(v.Z,{light:!0}),(0,o.jsx)(I,{receipt:e,onEdit:function(){return function(e){C(ye.edit),z(e)}(e)},onDelete:function(){return n=e.id,t=e.imageBucket,C(ye.delete),O(n),void T(t);var n,t}})]},e.id)}))]}),(0,o.jsx)(pe,{edit:L,showDialog:Z===ye.add||Z===ye.edit,onError:function(e){return ee(e,!1)},onSuccess:function(e){return ee(e,!0)},onCloseDialog:function(){return C(ye.none)}}),(0,o.jsxs)(m.Z,{open:Z===ye.delete,onClose:ne,children:[(0,o.jsx)(h.Z,{variant:"h4",className:xe().title,children:"DELETE EXPENSE"}),(0,o.jsx)(j.Z,{children:(0,o.jsx)(f.Z,{severity:"error",children:"This will permanently delete your receipt!"})}),(0,o.jsxs)(b.Z,{sx:{padding:"0 24px 24px"},children:[(0,o.jsx)(g.Z,{color:"secondary",variant:"outlined",onClick:ne,children:"Cancel"}),(0,o.jsx)(g.Z,{color:"secondary",variant:"contained",autoFocus:!0,onClick:re,children:"Delete"})]})]})]}):(0,o.jsx)(u.Z,{color:"inherit",sx:{marginLeft:"50%",marginTop:"25%"}})}},358:function(e){e.exports={primaryColor:"#fafafa",secondaryColor:"#1a73e8",tertiaryColor:"#1b3a57",successColor:"#00bfa5",errorColor:"#ff5252",fontColor:"#1b3a57",fontTitle:'"Google Sans Mono","Courier New",serif',fontDefault:'"Google Sans","Roboto",sans-serif',addButton:"dashboard_addButton__Tc34O",title:"dashboard_title__T9wDv"}},6409:function(e){e.exports={title:"expenseDialog_title__7JYks",fields:"expenseDialog_fields__jZXS6",dialog:"expenseDialog_dialog__DZRxJ",receiptImage:"expenseDialog_receiptImage__OWS9N"}},4639:function(e){e.exports={primaryColor:"#fafafa",secondaryColor:"#1a73e8",tertiaryColor:"#1b3a57",successColor:"#00bfa5",errorColor:"#ff5252",fontColor:"#1b3a57",fontTitle:'"Google Sans Mono","Courier New",serif',fontDefault:'"Google Sans","Roboto",sans-serif',container:"navbar_container__VP3XG",toolbar:"navbar_toolbar__nCZks"}},1933:function(e){e.exports={contentRow:"receiptRow_contentRow__msDcs",actions:"receiptRow_actions__Lgfzn"}}},function(e){e.O(0,[838,954,774,888,179],(function(){return n=9704,e(e.s=n);var n}));var n=e.O();_N_E=n}]);